(function(){"use strict";function s(e,t,a,m,c,h,g,b){var i=typeof e=="function"?e.options:e;return t&&(i.render=t,i.staticRenderFns=a,i._compiled=!0),{exports:e,options:i}}const o={props:{tab:{type:String,default:"images"}},data(){return{items:[],total:0,page:1,itemsPerPage:30,totalPages:1,loading:!1,stats:{}}},computed:{tabs(){return[{name:"images",label:this.getTabLabel("images"),link:"/media-library/images",icon:"image"},{name:"videos",label:this.getTabLabel("videos"),link:"/media-library/videos",icon:"video"},{name:"documents",label:this.getTabLabel("documents"),link:"/media-library/documents",icon:"document"},{name:"other",label:this.getTabLabel("other"),link:"/media-library/other",icon:"file"}]},headerTitle(){return`${{images:"Images",videos:"Videos",documents:"Documents",other:"Other Files"}[this.tab]||"Media Library"} (${this.total})`}},watch:{tab(){this.page=1,this.loadFiles()}},mounted(){this.loadStats(),this.loadFiles()},methods:{async loadStats(){try{this.stats=await this.$api.get("media-library/stats")}catch(e){console.error("Failed to load stats:",e)}},getTabLabel(e){const t={images:"Images",videos:"Videos",documents:"Documents",other:"Other"},a=this.stats[e];return a!==void 0?`${t[e]} (${a})`:t[e]},async loadFiles(){this.loading=!0;try{const e=await this.$api.get("media-library/files",{tab:this.tab,page:this.page,limit:this.itemsPerPage});this.items=e.items,this.total=e.total,this.totalPages=e.pages}catch(e){console.error("Failed to load files:",e),this.$store.dispatch("notification/error","Failed to load files")}finally{this.loading=!1}},handlePaginate(e){this.page=e.page,this.loadFiles()}}};var n=function(){var t=this,a=t._self._c;return a("k-panel-inside",[a("k-header",[t._v(t._s(t.headerTitle))]),a("k-tabs",{attrs:{tab:t.tab,tabs:t.tabs}}),t.loading?a("k-box",{attrs:{icon:"loader"}},[a("k-text",[t._v("Loading files...")])],1):t.items.length?a("k-items",{attrs:{items:t.items,layout:"cardlets"}}):a("k-box",{attrs:{theme:"info"}},[a("k-text",[t._v("No "+t._s(t.tab)+" found")])],1),t.totalPages>1?a("k-pagination",{staticStyle:{"margin-top":"var(--spacing-12)"},attrs:{page:t.page,limit:t.itemsPerPage,total:t.total,details:!0},on:{paginate:t.handlePaginate}}):t._e()],1)},l=[],r=s(o,n,l);const d=r.exports;panel.plugin("josehoudini/media-library",{components:{sitefiles:d}})})();
